"use strict";const e=require("fs").promises,s=require("path");module.exports=({filter:a,action:o},{services:r,database:n,getSchema:t})=>{const{RolesService:i}=r;async function l(){console.log("Seeding roles...");const a=await async function(s){console.log(`Reading json file from ${s}`);var a=await e.readFile(s);return JSON.parse(a)}(s.join(__dirname,"../../../seeddata/roles.json")),o=await t();var r=new i({knex:n,schema:o}),l=await r.readByQuery({fields:"*"});l.length<=1?(console.log("Only one role exists, creating other roles..."),await r.upsertMany(a)):console.log("More than one role already exists, skipping seed => ",l)}o("server.start",(async()=>{await l()}))};
